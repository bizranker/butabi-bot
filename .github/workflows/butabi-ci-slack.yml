name: Notify Slack

on:
  workflow_call:

jobs:
  notify-slack:
    runs-on: ubuntu-latest
    steps:
      - name: Post Glorious Decree to Slack
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.BUTABIBOT_WEBHOOK }}
        run: |
          curl -X POST -H 'Content-type: application/json' --data "{
            \"text\": \"
            *ðŸ¦š New Push to Main!*
            *ðŸ“œ Decree issued by ButabiBot!*

            *ðŸ‘‘ Pushed by:* \`${{ github.actor }}\`
            *ðŸŒ¿ Branch:* \`${{ github.ref_name }}\`
            *ðŸ“¦ Repository:* \`${{ github.repository }}\`
            *ðŸ•° Time:* \`$(date -u)\`

            <https://github.com/${{ github.repository }}/commit/${{ github.sha }}|View Commit>
            \"
          }" $SLACK_WEBHOOK_URL
